# :cat:2주차 



### 윤서파트

#### :facepunch: 유효범위 (여기서부터 시즌2 시작@; 시즌 3는 객체지향부터)

##### 유효범위-1 전역변수와 지역변수

유효범위: 변수의 수명 

:star: **1번 예시** : fscope함수는 함수 안에 선언되지 않은 vscope에 접근 가능한 것을 보여주는 예시! 

```javascript
var vscope = 'global'
function fscope(){
    alert(vscope);
}
fscope();
```

- 만약 fscope함수 안에 `var vscope = 'local'` 코드가 존재한다면 

  `local`을 출력함! 

> 자기자신에게 가까운 곳에 선언된 변수를 호출하게 된다 ! 
>
> => 지역 변수: `local` / 전역 변수: `global` 



:star: **2번 예시**: 함수 내 지역변수로 선언된 것은 함수 밖에서 호출 불가

```javascript
function fscope(){
    var lv = 'local variable'
    alert(lv) // 'local variable'
}
alert(lv) // undefined 
```



:star: **3번 예시**: 전역, 지역 변수가 중복되어 선언되었을 때



3-1

- 함수 내부에 var로 전연변수 선언
- `var` 사용 시 local 범위 안에서 지역변수로 선언된다. 

```javascript
var vscope = 'global'
function fscope(){
    var vscope = 'local'
}
fscope()
alert(vscope) // 전역 변수인 global 출력 
```

3-2

- 함수 내부에 var 사용 안 했을 시 
- var 사용을 안 할 경우 local이 아닌 전역 변수를 건드리는 것이 됨으로 전역변수를 수정한 후 호출되게 된다. 

```javascript
var vscope = 'global'
function fscope(){
    vscope = 'local' // 전역변수 수정 
}
fscope()
alert(vscope) // 수정된 전역변수인 local 출력 
```

3-3

- 함수 내에 var 사용한 것과 안 한 것 둘 다 사용 시 
- var 로 먼저 지역변수를 선언해버려서 지역변수를 수정하게 됨 

```javascript
var vscope = 'global'
function fscope(){
    var vscope = 'local'
    vscope = 'local'
}
fscope()
alert(vscope) // 함수 내 지역변수 상관없이 전역 변수인global 출력 
```



+추가 

```javascript
var vscope = 'global'
function fscope(){
    vscope = 'local'  // 왜 얘는 전역변수를 수정하지 않을까
    var vscope = 'local'
}
fscope()
alert(vscope) // global 이 출력됨...
```

- 3번줄 vscope가 아직 지역변수가 없기 때문에 

  전역변수인 vscope='global'이 'local'로 수정되었다고 생각했음..

- 근데 왜 global이 출력될까? 



##### 유효범위-2 유효범위의 효용

```javascript
// 함수 안과 밖에 같은 변수 이름이지만 각각 선언했을 때
function a () {
    var i = 0
}
for (var i = 0; i < 5; i ++){
    a();
    document.write(i);
}
// 01234 출력
```

- 만약 2번 줄에 var 선언을 안하면 무한 루프에 빠진다 
- 이유) 4번 줄 i 는 전역변수로 선언된 것이고 function 내에 var 선언을 하지 않아 전역변수인 i 를 바꾸게 돼서 무한 반복된다. 
- `다른 디렉토리라면 파일 이름이 같아도 되는 것과 동일 원리! `



##### 유효범위-3 전역 변수를 사용하는 법

```javascript
var MYAPP = {} // 01. 전역변수로 객체 생성 

// 02. 객체 내 calculator 속성 값으로 left, right를 지정해줌 
MYAPP.calculator = {
    'left' : null,
    'right' : null
}

// 03. 객체 내 coordinate 속성 값으로 left, right 지정 해줌 
MYAPP.coordinate = {
    'left' : null,
    'right' : null
}
// 04. 값 지정 
MYAPP.calculator.left = 10;
MYAPP.calculator.right = 20;

// 05.전역 변수 내 calculator에 접근 
function sum() {
    return MYAPP.calculator.left + MYAPP.calculator.right;
} 
document.write(sum()) // 30 
```

- 코드의 취지 : MYAPP이라는 전역 변수 하나를 통해, 필요에 따라서 속성을 이용해서 값 저장이 가능! 
- 오픈 소스나 다른 사람과 코드를 공유하게 되면 충돌 가능성이 있다. 
  - 이럴 경우 속성을 이용해서 저렇게 구분된 값을 사용 가능! 

- 위의 코드 전체를 `function(){...} ` 안에 넣으면 더 이상 전역변수가 아닌 함수 내 local variable이 된다! 



##### 유효범위-4 함수 

- 지역변수를 선언할 수 있는 경우는 `함수`로 국한됨!

- Java 예시 

```java
for(int i = 0; i < 10; i++){
    String name = 'egoing'
}
System.out.print(name); // error
// name은 지역변수로 for 문 안에서 선언되었는데 for 문 밖에서 호출하기 때문
```

- JavaScript 예시 

```javascript
for (var i = 0; i < 1; i++){
    var name = 'coding everybody'
}
alert(name); // coding everybody
// 자바스크립트에서 지역변수는 함수 내에서만!!
// for, while 등 에서는 지역변수로서의 의미를 가지지 않는다!
```



##### 유효범위-5 정적 유효 범위

-  자바스크립트는 함수가 선언된 시점에서의 유효범위를 갖는다. 

```javascript
var i = 5; // 전역변수 

function a(){
    var i = 10; // 지역변수
    b(); // b 호출 
}

function b(){
    document.write(i); 
}
a(); // 뭐가 나올까!?
```

1. 함수 a 호출 
2. 함수 a 내 지역변수 i = 10
3. b 호출 
4. b 함수에서 찍은 i는 ?! 
   1. 우선 b 내부에 지역변수 찾아봄 -> 없음 
   2. 전역변수를 찾아봄 -> `함수 b가 선언된 시점의 전역변수` 인 5가 출력됨!

:star: b가 호출된 것의 상위 함수인 a의 i=10이 아닌 정의될 때 전역변수 사용!

= 정적 유효범위 (lexical)